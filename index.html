<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GameSense.pub</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, sans-serif;
        }

        body {
            background: #0f0f0f;
            color: #d0d0d0;
            font-size: 13px;
            line-height: 1.4;
        }

        .container {
            width: 1300px;
            margin: 0 auto;
            padding: 0 15px;
        }

        /* Header */
        .header {
            background: #1a1a1a;
            border-bottom: 1px solid #2a2a2a;
            padding: 10px 0;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 22px;
            font-weight: 800;
            text-decoration: none;
            letter-spacing: -0.5px;
        }

        .logo-game {
            color: #ffffff;
        }

        .logo-sense {
            color: #00ff00;
        }

        .nav-main {
            display: flex;
            gap: 25px;
            font-size: 13px;
            font-weight: 600;
        }

        .nav-main a {
            color: #b0b0b0;
            text-decoration: none;
            padding: 5px 0;
            border-bottom: 2px solid transparent;
            transition: all 0.2s;
        }

        .nav-main a:hover,
        .nav-main a.active {
            color: #00ff00;
            border-bottom-color: #00ff00;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 12px;
        }

        .premium-badge {
            background: linear-gradient(45deg, #ff6b00, #ffa500);
            color: #000;
            padding: 3px 8px;
            border-radius: 3px;
            font-size: 10px;
            font-weight: 700;
            text-transform: uppercase;
        }

        .logout-btn {
            background: #333;
            color: #b0b0b0;
            padding: 4px 10px;
            border: 1px solid #444;
            border-radius: 3px;
            font-size: 11px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .logout-btn:hover {
            background: #444;
            color: #fff;
        }

        /* Premium Info */
        .premium-info {
            background: #151515;
            border-bottom: 1px solid #2a2a2a;
            padding: 10px 0;
            font-size: 12px;
        }

        .premium-text {
            color: #ffa500;
            font-weight: 600;
        }

        .discord-link {
            color: #00ff00;
            text-decoration: none;
            margin-left: 15px;
            font-weight: 600;
        }

        .discord-link:hover {
            text-decoration: underline;
        }

        /* Main Layout */
        .main-layout {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 20px;
            margin: 20px 0;
        }

        /* Sections */
        .section {
            background: #1a1a1a;
            border: 1px solid #2a2a2a;
            border-radius: 6px;
            margin-bottom: 15px;
            overflow: hidden;
        }

        .section-header {
            background: linear-gradient(135deg, #252525, #1f1f1f);
            padding: 12px 20px;
            border-bottom: 1px solid #2a2a2a;
            color: #00ff00;
            font-weight: 700;
            font-size: 14px;
        }

        .section-content {
            padding: 20px;
        }

        /* Chat */
        .chat-messages {
            padding: 15px;
            max-height: 300px;
            overflow-y: auto;
            font-size: 12px;
            font-family: 'Consolas', 'Monaco', monospace;
            background: #151515;
            border-radius: 4px;
        }

        .chat-message {
            margin-bottom: 5px;
            padding: 3px 0;
        }

        .chat-username {
            color: #00ff00;
            font-weight: 700;
        }

        .chat-time {
            color: #666;
            margin-right: 8px;
        }

        .chat-input-row {
            padding: 12px 15px;
            border-top: 1px solid #2a2a2a;
            display: flex;
            gap: 10px;
            background: #1f1f1f;
        }

        .chat-input {
            flex-grow: 1;
            padding: 8px 12px;
            background: #252525;
            border: 1px solid #333;
            border-radius: 4px;
            color: #d0d0d0;
            font-size: 12px;
            font-family: 'Consolas', monospace;
        }

        .chat-input:focus {
            outline: none;
            border-color: #00ff00;
        }

        .chat-send {
            background: #00ff00;
            color: #000;
            padding: 8px 20px;
            border: none;
            border-radius: 4px;
            font-weight: 700;
            cursor: pointer;
            font-size: 12px;
            transition: background 0.2s;
        }

        .chat-send:hover {
            background: #00cc00;
        }

        /* Forums Table */
        .forums-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 12px;
        }

        .forums-table th {
            background: #252525;
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #333;
            color: #00ff00;
            font-weight: 700;
        }

        .forums-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #2a2a2a;
        }

        .forums-table tr:hover {
            background: #1f1f1f;
        }

        .forum-name {
            color: #00ff00;
            font-weight: 700;
        }

        .new-posts {
            color: #00ff00;
            font-weight: 700;
            font-size: 11px;
        }

        /* Threads */
        .thread {
            padding: 15px 20px;
            border-bottom: 1px solid #2a2a2a;
            cursor: pointer;
            transition: background 0.2s;
        }

        .thread:hover {
            background: #1f1f1f;
        }

        .thread:last-child {
            border-bottom: none;
        }

        .thread-title {
            color: #00ff00;
            font-weight: 700;
            font-size: 14px;
            margin-bottom: 5px;
        }

        .thread-meta {
            font-size: 11px;
            color: #888;
        }

        .thread-stats {
            display: flex;
            gap: 15px;
            margin-top: 3px;
        }

        .stat {
            color: #666;
        }

        /* Single Post */
        .post {
            padding: 25px;
        }

        .post-header {
            border-bottom: 1px solid #2a2a2a;
            padding-bottom: 15px;
            margin-bottom: 20px;
        }

        .post-title {
            color: #00ff00;
            font-weight: 700;
            font-size: 18px;
            margin-bottom: 8px;
        }

        .post-meta {
            font-size: 12px;
            color: #888;
        }

        .post-content {
            font-size: 13px;
            line-height: 1.6;
            margin-bottom: 20px;
            color: #c0c0c0;
        }

        .post-attachments {
            background: #252525;
            border: 1px solid #333;
            border-radius: 4px;
            padding: 15px;
            margin: 15px 0;
        }

        .attachment-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 0;
            border-bottom: 1px solid #333;
        }

        .attachment-item:last-child {
            border-bottom: none;
        }

        .attachment-icon {
            color: #00ff00;
            font-size: 16px;
        }

        .attachment-name {
            color: #d0d0d0;
            font-weight: 600;
        }

        .attachment-download {
            background: #00ff00;
            color: #000;
            padding: 4px 12px;
            border: none;
            border-radius: 3px;
            font-size: 11px;
            font-weight: 700;
            cursor: pointer;
            margin-left: auto;
        }

        .post-actions {
            display: flex;
            gap: 10px;
            margin: 20px 0;
            padding: 15px 0;
            border-top: 1px solid #2a2a2a;
            border-bottom: 1px solid #2a2a2a;
        }

        .post-action {
            background: #252525;
            color: #d0d0d0;
            padding: 8px 16px;
            border: 1px solid #333;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
            transition: all 0.2s;
        }

        .post-action:hover {
            background: #2a2a2a;
            border-color: #00ff00;
        }

        /* Comments */
        .comments-section {
            margin-top: 25px;
        }

        .comment {
            padding: 15px;
            border-bottom: 1px solid #2a2a2a;
            background: #1f1f1f;
            border-radius: 4px;
            margin-bottom: 10px;
        }

        .comment:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .comment-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .comment-author {
            color: #00ff00;
            font-weight: 700;
            font-size: 13px;
        }

        .comment-meta {
            font-size: 11px;
            color: #666;
        }

        .comment-content {
            font-size: 12px;
            line-height: 1.5;
            color: #c0c0c0;
        }

        .add-comment {
            margin-top: 20px;
            padding: 20px;
            background: #252525;
            border-radius: 4px;
        }

        .comment-input {
            width: 100%;
            padding: 12px;
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 4px;
            color: #d0d0d0;
            font-size: 12px;
            margin-bottom: 12px;
            height: 80px;
            resize: vertical;
        }

        .comment-input:focus {
            outline: none;
            border-color: #00ff00;
        }

        .comment-submit {
            background: #00ff00;
            color: #000;
            padding: 10px 25px;
            border: none;
            border-radius: 4px;
            font-weight: 700;
            cursor: pointer;
            font-size: 12px;
        }

        /* Create Post */
        .create-post {
            padding: 25px;
        }

        .post-form input,
        .post-form textarea {
            width: 100%;
            padding: 12px 15px;
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 4px;
            color: #d0d0d0;
            font-size: 13px;
            margin-bottom: 15px;
        }

        .post-form input:focus,
        .post-form textarea:focus {
            outline: none;
            border-color: #00ff00;
        }

        .post-form textarea {
            height: 150px;
            resize: vertical;
        }

        .file-attachment {
            background: #252525;
            border: 2px dashed #333;
            border-radius: 4px;
            padding: 20px;
            text-align: center;
            margin: 15px 0;
            cursor: pointer;
            transition: all 0.2s;
        }

        .file-attachment:hover {
            border-color: #00ff00;
            background: #2a2a2a;
        }

        .file-attachment-icon {
            font-size: 24px;
            color: #00ff00;
            margin-bottom: 8px;
        }

        .file-attachment-text {
            color: #888;
            font-size: 12px;
        }

        .file-list {
            margin-top: 15px;
        }

        .file-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 12px;
            background: #1f1f1f;
            border: 1px solid #333;
            border-radius: 4px;
            margin-bottom: 5px;
        }

        .file-name {
            color: #d0d0d0;
            font-size: 12px;
        }

        .remove-file {
            color: #ff4444;
            cursor: pointer;
            margin-left: auto;
            font-weight: 700;
        }

        .post-submit {
            background: #00ff00;
            color: #000;
            padding: 12px 30px;
            border: none;
            border-radius: 4px;
            font-weight: 700;
            cursor: pointer;
            font-size: 13px;
            width: 100%;
            transition: background 0.2s;
        }

        .post-submit:hover {
            background: #00cc00;
        }

        /* Auth */
        .auth-section {
            width: 400px;
            margin: 100px auto;
        }

        .auth-box {
            background: #1a1a1a;
            border: 1px solid #2a2a2a;
            border-radius: 8px;
            padding: 30px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
        }

        .auth-header {
            text-align: center;
            margin-bottom: 25px;
        }

        .logo-auth {
            font-size: 32px;
            font-weight: 800;
            margin-bottom: 8px;
            letter-spacing: -1px;
        }

        .auth-subtitle {
            font-size: 14px;
            color: #888;
            font-weight: 600;
        }

        .auth-tabs {
            display: flex;
            margin-bottom: 25px;
            border-bottom: 1px solid #2a2a2a;
        }

        .auth-tab {
            padding: 12px 25px;
            color: #666;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            font-size: 13px;
            font-weight: 600;
            transition: all 0.2s;
        }

        .auth-tab.active {
            color: #00ff00;
            border-bottom-color: #00ff00;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #00ff00;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .form-group input {
            width: 100%;
            padding: 12px 15px;
            background: #252525;
            border: 1px solid #333;
            border-radius: 4px;
            color: #d0d0d0;
            font-size: 13px;
            transition: all 0.2s;
        }

        .form-group input:focus {
            outline: none;
            border-color: #00ff00;
            background: #2a2a2a;
        }

        .submit-btn {
            background: #00ff00;
            color: #000;
            padding: 14px;
            border: none;
            border-radius: 4px;
            width: 100%;
            font-weight: 700;
            cursor: pointer;
            font-size: 13px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: background 0.2s;
        }

        .submit-btn:hover {
            background: #00cc00;
        }

        .error-message {
            color: #ff4444;
            font-size: 12px;
            margin-top: 15px;
            text-align: center;
            font-weight: 600;
        }

        .info-message {
            background: #252525;
            border: 1px solid #333;
            border-radius: 4px;
            padding: 20px;
            text-align: center;
            margin-top: 20px;
            font-size: 13px;
        }

        .footer {
            text-align: center;
            margin-top: 30px;
            color: #666;
            font-size: 11px;
        }

        /* Back button */
        .back-btn {
            background: #333;
            color: #b0b0b0;
            padding: 8px 16px;
            border: 1px solid #444;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 15px;
            transition: all 0.2s;
        }

        .back-btn:hover {
            background: #444;
            color: #fff;
        }

        /* Online Users */
        .online-users {
            font-size: 12px;
            color: #888;
        }

        .online-count {
            color: #00ff00;
            font-weight: 700;
        }

        /* Todo List */
        .todo-list {
            margin-top: 10px;
            padding-left: 20px;
            font-size: 12px;
        }

        .todo-list li {
            margin-bottom: 5px;
            color: #888;
        }
    </style>
</head>
<body>
    <!-- Auth Section -->
    <div id="authSection" class="auth-section">
        <div class="auth-box">
            <div class="auth-header">
                <div class="logo-auth">
                    <span class="logo-game">Game</span><span class="logo-sense">Sense</span>
                </div>
                <div class="auth-subtitle">Get good. Get GameSense.</div>
            </div>

            <div class="auth-tabs">
                <div class="auth-tab active" onclick="showTab('login')">Login</div>
                <div class="auth-tab" onclick="showTab('register')">Register</div>
            </div>

            <div id="loginForm">
                <div class="form-group">
                    <label>USERNAME</label>
                    <input type="text" id="loginUsername" placeholder="Enter your username">
                </div>
                <div class="form-group">
                    <label>PASSWORD</label>
                    <input type="password" id="loginPassword" placeholder="Enter your password">
                </div>
                <div class="form-group">
                    <label>ACCESS KEY</label>
                    <input type="text" id="loginKey" placeholder="Enter your access key">
                </div>
                <button class="submit-btn" onclick="login()">LOGIN</button>
                <div id="loginError" class="error-message"></div>
            </div>

            <div id="registerForm" style="display: none;">
                <div class="form-group">
                    <label>USERNAME</label>
                    <input type="text" id="regUsername" placeholder="Choose a username">
                </div>
                <div class="form-group">
                    <label>PASSWORD</label>
                    <input type="password" id="regPassword" placeholder="Create a password">
                </div>
                <div class="form-group">
                    <label>ACCESS KEY</label>
                    <input type="text" id="regKey" placeholder="Enter valid access key">
                </div>
                <button class="submit-btn" onclick="register()">REGISTER</button>
                <div id="regError" class="error-message"></div>
            </div>
        </div>

        <div class="info-message">
            <strong>You do not have permission to view these forums.</strong><br>
            You are not logged in.
        </div>

        <div class="footer">
            GameSense 2025
        </div>
    </div>

    <!-- Forum Section -->
    <div id="forumSection" style="display: none;">
        <!-- Header -->
        <div class="header">
            <div class="container">
                <div class="header-content">
                    <a href="#" class="logo" onclick="showSection('index')">
                        <span class="logo-game">Game</span><span class="logo-sense">Sense</span>
                    </a>
                    <nav class="nav-main">
                        <a href="#" class="active" onclick="showSection('index')">Index</a>
                        <a href="#" onclick="showSection('threads')">Threads</a>
                        <a href="#" onclick="showSection('create')">Create Post</a>
                        <a href="#">PNI</a>
                        <a href="#">Premium</a>
                        <a href="#">Admin</a>
                    </nav>
                    <div class="user-info" id="userInfo"></div>
                </div>
            </div>
        </div>

        <!-- Premium Info -->
        <div class="premium-info">
            <div class="container">
                <span class="premium-text">Logged in as <strong id="currentUser">bony_fon</strong></span><br>
                <span class="premium-text">Premium (Counter-Strike: Global Offensive) until 02-01-2918 21:10:32</span>
                <a href="#" class="discord-link">Join us on discord</a>
                <a href="#" class="discord-link">Common issues</a>
            </div>
        </div>

        <!-- Main Content -->
        <div class="container">
            <div class="main-layout">
                <!-- Left Column -->
                <div>
                    <!-- Index Section -->
                    <div id="indexSection">
                        <div class="section">
                            <div class="section-header">Announcement</div>
                            <div class="section-content">
                                As soon as everything is finished, we will probably sell that script.
                                <br>--- To-do:
                                <ul class="todo-list">
                                    <li>fix chat's emoji.</li>
                                    <li>add discord id reset for users & admin's control panel.</li>
                                    <li>add hwd reset for users & admin's control panel.</li>
                                    <li>add download button.</li>
                                    <li>add api for loaders.</li>
                                </ul>
                            </div>
                        </div>

                        <div class="section">
                            <div class="section-header">General</div>
                            <div class="section-content" style="padding: 0;">
                                <table class="forums-table">
                                    <thead>
                                        <tr>
                                            <th>Forum</th>
                                            <th>Topics</th>
                                            <th>Posts</th>
                                            <th>Last post</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td><span class="forum-name">Announcements</span> <span class="new-posts">[ New posts ]</span></td>
                                            <td>2</td>
                                            <td>2</td>
                                            <td>Today 22:23:35 by mond</td>
                                        </tr>
                                        <tr>
                                            <td>Stay up to date with the latest news</td>
                                            <td>1</td>
                                            <td>6</td>
                                            <td>Today 21:56:22 by lordmax</td>
                                        </tr>
                                        <tr>
                                            <td><span class="forum-name">General talk</span> <span class="new-posts">[ New posts ]</span></td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>Never</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- Threads Section -->
                    <div id="threadsSection" style="display: none;">
                        <div class="section">
                            <div class="section-header">Threads</div>
                            <div class="section-content" style="padding: 0;">
                                <div id="threadsContainer"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Create Post Section -->
                    <div id="createSection" style="display: none;">
                        <button class="back-btn" onclick="showSection('threads')">← Back to Threads</button>
                        <div class="section">
                            <div class="section-header">Create Post</div>
                            <div class="create-post">
                                <form class="post-form" onsubmit="createPost(event)">
                                    <input type="text" id="postTitle" placeholder="Post Title" required>
                                    <textarea id="postContent" placeholder="Post Content" required></textarea>
                                    
                                    <div class="file-attachment" onclick="document.getElementById('fileInput').click()">
                                        <div class="file-attachment-icon">📎</div>
                                        <div class="file-attachment-text">Click to attach files or drag & drop</div>
                                        <input type="file" id="fileInput" multiple style="display: none;" onchange="handleFileSelect(event)">
                                    </div>
                                    <div id="fileList" class="file-list"></div>
                                    
                                    <button type="submit" class="post-submit">CREATE POST</button>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- Single Post Section -->
                    <div id="postSection" style="display: none;">
                        <button class="back-btn" onclick="showSection('threads')">← Back to Threads</button>
                        <div class="section">
                            <div id="postContainer"></div>
                        </div>
                    </div>
                </div>

                <!-- Right Column -->
                <div>
                    <div class="section">
                        <div class="section-header">Chat</div>
                        <div class="chat-messages" id="chatMessages"></div>
                        <div class="chat-input-row">
                            <input type="text" class="chat-input" id="chatInput" placeholder="Type a message...">
                            <button class="chat-send" onclick="sendMessage()">Send</button>
                        </div>
                    </div>

                    <div class="section">
                        <div class="section-header">Online Users</div>
                        <div class="section-content">
                            <div class="online-users">
                                <span class="online-count">428 users online</span><br>
                                4 staff, 28 members, 386 guests
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // GameSense System
        const system = {
            admin: {
                username: 'Monax',
                password: 'Kzrhdf1992A_',
                accessKey: 'GS_38838383'
            },
            users: {
                'bony_fon': {
                    password: 'test123',
                    accessKey: 'GS_12345678'
                }
            },
            chatMessages: [
                {time: '22:15:39', user: 'lordmaxx', message: ''},
                {time: '22:15:39', user: 'lordmaxx', message: ''},
                {time: '22:15:39', user: 'handenawchi', message: 'rmod;'},
                {time: '22:15:43', user: 'handenawchi', message: 'mod;'},
                {time: '22:15:43', user: 'handenawchi', message: '+N;'},
                {time: '22:15:43', user: 'handenawchi', message: '=)'},
                {time: '22:15:39', user: 'handenawchi', message: '=)'},
                {time: '22:15:39', user: 'handenawchi', message: 'xx'},
                {time: '22:16:49', user: 'handenawchi', message: '⚠️'}
            ],
            posts: [
                {
                    id: 1,
                    title: '[RELEASE] GameSense v3.1.7 Latest Build',
                    content: 'Latest version of GameSense with improved features and bug fixes. This release includes enhanced anti-detection systems, improved performance, and new scripting capabilities.',
                    author: 'Monax',
                    date: 'Today 14:32',
                    replies: 247,
                    views: 1200,
                    likes: 89,
                    files: [
                        {name: 'GameSense_Loader.exe', size: '2.4 MB', type: 'exe'},
                        {name: 'Default_Config.cfg', size: '15 KB', type: 'cfg'}
                    ],
                    comments: [
                        {author: 'user123', content: 'Great release! Working perfectly on FaceIT.', date: 'Today 15:20'},
                        {author: 'csgo_pro', content: 'The new features are amazing! The ragebot feels much smoother now.', date: 'Today 15:45'}
                    ]
                },
                {
                    id: 2,
                    title: 'Official Configurations Repository',
                    content: 'Collection of official configurations for different playstyles. Includes legit, rage, and HvH configurations optimized for various scenarios.',
                    author: 'System',
                    date: 'Yesterday 18:15',
                    replies: 89,
                    views: 2400,
                    likes: 45,
                    files: [
                        {name: 'Config_Pack_v2.zip', size: '156 KB', type: 'zip'}
                    ],
                    comments: [
                        {author: 'config_master', content: 'My config improved my gameplay significantly! Went from Gold Nova to Global in 2 weeks.', date: 'Yesterday 19:30'}
                    ]
                }
            ]
        };

        let currentUsername = '';
        let attachedFiles = [];

        // Tab Management
        function showTab(tab) {
            document.getElementById('loginForm').style.display = tab === 'login' ? 'block' : 'none';
            document.getElementById('registerForm').style.display = tab === 'register' ? 'block' : 'none';
            
            document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
        }

        // Section Management
        function showSection(section) {
            // Update nav active state
            document.querySelectorAll('.nav-main a').forEach(a => a.classList.remove('active'));
            event.target.classList.add('active');
            
            // Hide all sections
            document.getElementById('indexSection').style.display = 'none';
            document.getElementById('threadsSection').style.display = 'none';
            document.getElementById('createSection').style.display = 'none';
            document.getElementById('postSection').style.display = 'none';
            
            // Show target section
            document.getElementById(section + 'Section').style.display = 'block';
            
            // Load content if needed
            if (section === 'threads') {
                loadThreads();
            }
        }

        // Chat System
        function loadChatMessages() {
            const container = document.getElementById('chatMessages');
            container.innerHTML = '';
            
            system.chatMessages.forEach(msg => {
                const messageDiv = document.createElement('div');
                messageDiv.className = 'chat-message';
                messageDiv.innerHTML = `<span class="chat-time">[${msg.time}]</span> <span class="chat-username">${msg.user}</span>${msg.message ? ': ' + msg.message : ''}`;
                container.appendChild(messageDiv);
            });
            
            container.scrollTop = container.scrollHeight;
        }

        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (message && currentUsername) {
                const now = new Date();
                const time = `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}:${now.getSeconds().toString().padStart(2, '0')}`;
                
                system.chatMessages.push({
                    time: time,
                    user: currentUsername,
                    message: message
                });
                
                input.value = '';
                loadChatMessages();
            }
        }

        // File Handling
        function handleFileSelect(event) {
            const files = event.target.files;
            const fileList = document.getElementById('fileList');
            
            for (let file of files) {
                attachedFiles.push(file);
                const fileItem = document.createElement('div');
                fileItem.className = 'file-item';
                fileItem.innerHTML = `
                    <span class="file-name">📎 ${file.name}</span>
                    <span class="remove-file" onclick="removeFile('${file.name}')">✕</span>
                `;
                fileList.appendChild(fileItem);
            }
        }

        function removeFile(fileName) {
            attachedFiles = attachedFiles.filter(file => file.name !== fileName);
            const fileList = document.getElementById('fileList');
            fileList.innerHTML = '';
            
            attachedFiles.forEach(file => {
                const fileItem = document.createElement('div');
                fileItem.className = 'file-item';
                fileItem.innerHTML = `
                    <span class="file-name">📎 ${file.name}</span>
                    <span class="remove-file" onclick="removeFile('${file.name}')">✕</span>
                `;
                fileList.appendChild(fileItem);
            });
        }

        // Posts System
        function loadThreads() {
            const container = document.getElementById('threadsContainer');
            container.innerHTML = '';
            
            system.posts.forEach(post => {
                const thread = document.createElement('div');
                thread.className = 'thread';
                thread.onclick = () => viewPost(post.id);
                thread.innerHTML = `
                    <div class="thread-title">${post.title}</div>
                    <div class="thread-meta">
                        Started by ${post.author} • ${post.date}
                    </div>
                    <div class="thread-stats">
                        <span class="stat">${post.replies} replies</span>
                        <span class="stat">${post.views} views</span>
                        <span class="stat">${post.likes} likes</span>
                        ${post.files.length > 0 ? `<span class="stat">📎 ${post.files.length} files</span>` : ''}
                    </div>
                `;
                container.appendChild(thread);
            });
        }

        function viewPost(postId) {
            const post = system.posts.find(p => p.id === postId);
            if (post) {
                post.views++;
                
                const container = document.getElementById('postContainer');
                container.innerHTML = `
                    <div class="post">
                        <div class="post-header">
                            <div class="post-title">${post.title}</div>
                            <div class="post-meta">
                                Posted by ${post.author} • ${post.date} • ${post.views} views
                            </div>
                        </div>
                        
                        <div class="post-content">${post.content}</div>
                        
                        ${post.files.length > 0 ? `
                            <div class="post-attachments">
                                <strong style="display: block; margin-bottom: 10px; color: #00ff00;">Attached Files:</strong>
                                ${post.files.map(file => `
                                    <div class="attachment-item">
                                        <span class="attachment-icon">📎</span>
                                        <span class="attachment-name">${file.name}</span>
                                        <span style="color: #666; font-size: 11px;">${file.size}</span>
                                        <button class="attachment-download" onclick="downloadFile('${file.name}')">Download</button>
                                    </div>
                                `).join('')}
                            </div>
                        ` : ''}
                        
                        <div class="post-actions">
                            <div class="post-action" onclick="reactToPost(${post.id}, 'like')">👍 Like (${post.likes})</div>
                            <div class="post-action" onclick="focusComment(${post.id})">💬 Comment</div>
                        </div>
                        
                        <div class="comments-section">
                            <div style="color: #00ff00; font-weight: 700; margin-bottom: 15px; font-size: 14px;">
                                Comments (${post.comments.length})
                            </div>
                            
                            ${post.comments.map(comment => `
                                <div class="comment">
                                    <div class="comment-header">
                                        <span class="comment-author">${comment.author}</span>
                                        <span class="comment-meta">${comment.date}</span>
                                    </div>
                                    <div class="comment-content">${comment.content}</div>
                                </div>
                            `).join('')}
                            
                            <div class="add-comment">
                                <textarea class="comment-input" id="commentInput${post.id}" placeholder="Write your comment..."></textarea>
                                <button class="comment-submit" onclick="addComment(${post.id})">POST COMMENT</button>
                            </div>
                        </div>
                    </div>
                `;
                
                showSection('post');
            }
        }

        function createPost(event) {
            event.preventDefault();
            
            const title = document.getElementById('postTitle').value;
            const content = document.getElementById('postContent').value;
            
            const fileNames = attachedFiles.map(file => ({
                name: file.name,
                size: (file.size / 1024).toFixed(1) + ' KB',
                type: file.name.split('.').pop()
            }));
            
            const newPost = {
                id: system.posts.length + 1,
                title: title,
                content: content,
                author: currentUsername,
                date: 'Just now',
                replies: 0,
                views: 0,
                likes: 0,
                files: fileNames,
                comments: []
            };
            
            system.posts.unshift(newPost);
            
            // Clear form
            document.getElementById('postTitle').value = '';
            document.getElementById('postContent').value = '';
            document.getElementById('fileList').innerHTML = '';
            attachedFiles = [];
            
            showSection('threads');
            loadThreads();
        }

        function reactToPost(postId, action) {
            const post = system.posts.find(p => p.id === postId);
            if (post && action === 'like') {
                post.likes++;
                viewPost(postId);
            }
        }

        function focusComment(postId) {
            const commentInput = document.getElementById('commentInput' + postId);
            if (commentInput) {
                commentInput.focus();
            }
        }

        function addComment(postId) {
            const commentInput = document.getElementById('commentInput' + postId);
            const comment = commentInput.value.trim();
            
            if (comment) {
                const post = system.posts.find(p => p.id === postId);
                if (post) {
                    const now = new Date();
                    const date = `Today ${now.getHours()}:${now.getMinutes().toString().padStart(2, '0')}`;
                    
                    post.comments.push({
                        author: currentUsername,
                        content: comment,
                        date: date
                    });
                    
                    post.replies++;
                    commentInput.value = '';
                    viewPost(postId);
                }
            }
        }

        function downloadFile(filename) {
            alert(`Downloading: ${filename}\n\nIn a real GameSense forum, this would start the download.`);
        }

        // Auth System
        function login() {
            const username = document.getElementById('loginUsername').value;
            const password = document.getElementById('loginPassword').value;
            const key = document.getElementById('loginKey').value;
            const errorDiv = document.getElementById('loginError');

            if (!username || !password || !key) {
                errorDiv.textContent = 'Please fill all fields!';
                return;
            }

            if (username === system.admin.username && password === system.admin.password && key === system.admin.accessKey) {
                currentUsername = username;
                showForum(username);
                return;
            }

            if (system.users[username] && system.users[username].password === password && system.users[username].accessKey === key) {
                currentUsername = username;
                showForum(username);
            } else {
                errorDiv.textContent = 'Invalid credentials!';
            }
        }

        function register() {
            const username = document.getElementById('regUsername').value;
            const password = document.getElementById('regPassword').value;
            const key = document.getElementById('regKey').value;
            const errorDiv = document.getElementById('regError');

            if (!username || !password || !key) {
                errorDiv.textContent = 'Please fill all fields!';
                return;
            }

            if (!key.startsWith('GS_')) {
                errorDiv.textContent = 'Invalid access key format!';
                return;
            }

            if (system.users[username] || username === system.admin.username) {
                errorDiv.textContent = 'Username already exists!';
                return;
            }

            system.users[username] = { password: password, accessKey: key };
            currentUsername = username;
            showForum(username);
        }

        function showForum(username) {
            document.getElementById('authSection').style.display = 'none';
            document.getElementById('forumSection').style.display = 'block';

            document.getElementById('userInfo').innerHTML = `
                <span>${username}</span>
                <div class="premium-badge">Premium</div>
                <button class="logout-btn" onclick="logout()">Logout</button>
            `;

            document.getElementById('currentUser').textContent = username;
            loadChatMessages();
            loadThreads();
        }

        function logout() {
            location.reload();
        }

        // Enter key for chat
        document.addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && document.getElementById('chatInput')) {
                sendMessage();
            }
        });

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            loadChatMessages();
        });
    </script>
</body>
      </html>
